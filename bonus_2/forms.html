<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Ruby for Beginners">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="BEd2YAbpSQrRqU2-5wUifTTzvqTMGLLE269b0JZTfCs" />

    <title>Bonus: Forms | Ruby for Beginners</title>

    <link href="../assets/stylesheets/monstas-8ef2dc26.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <nav class="page-nav"><a class="prev" href="/bonus_2/sinatra.html">
  Previous
</a></nav>
    <nav class="page-nav"><a class="next" href="/bonus_2/storing_data.html">
  Next
</a></nav>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
  <li>
    <a href="/index.html">
      Ruby For Beginners
    </a>
  </li>
  <li>
    <a href="/preface.html">
      Preface
    </a>
  </li>
  <li>
    <a href="/creation.html">
      Programming is creation
    </a>
  </li>
  <li class="directory">
    <a href="/learning_to_program.html">
      Learning to program
    </a>
    <ul>
      <li>
        <a href="/learning_to_program/learning_modes.html">
          Learning modes
        </a>
      </li>
      <li>
        <a href="/learning_to_program/dont_believe.html">
          Don&rsquo;t believe everything we say
        </a>
      </li>
      <li>
        <a href="/learning_to_program/formatting_code.html">
          Formatting your code
        </a>
      </li>
      <li>
        <a href="/learning_to_program/error_messages.html">
          Reading error messages
        </a>
      </li>
      <li>
        <a href="/learning_to_program/using_google.html">
          Using Google
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/your_tools.html">
      Your tools
    </a>
    <ul>
      <li>
        <a href="/your_tools/text_editor.html">
          Text Editor
        </a>
      </li>
      <li>
        <a href="/your_tools/terminal.html">
          Terminal
        </a>
      </li>
      <li>
        <a href="/your_tools/ruby_runtime.html">
          Ruby runtime
        </a>
      </li>
      <li>
        <a href="/your_tools/workflow.html">
          Programming workflow
        </a>
      </li>
      <li>
        <a href="/your_tools/irb.html">
          Interactive Ruby
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/object_oriented_programming.html">
      Object-oriented programming
    </a>
  </li>
  <li class="directory">
    <a href="/built_in_classes.html">
      Built-in classes
    </a>
    <ul>
      <li>
        <a href="/built_in_classes/numbers.html">
          Numbers
        </a>
      </li>
      <li>
        <a href="/built_in_classes/strings.html">
          Strings
        </a>
      </li>
      <li>
        <a href="/built_in_classes/symbols.html">
          Symbols
        </a>
      </li>
      <li>
        <a href="/built_in_classes/arrays.html">
          Arrays
        </a>
      </li>
      <li>
        <a href="/built_in_classes/hashes.html">
          Hashes
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/variables.html">
      Variables
    </a>
  </li>
  <li class="directory">
    <a href="/methods.html">
      Methods
    </a>
    <ul>
      <li>
        <a href="/methods/return_values.html">
          Return values
        </a>
      </li>
      <li>
        <a href="/methods/parentheses.html">
          Parentheses
        </a>
      </li>
      <li>
        <a href="/methods/writing_methods.html">
          Writing a new method
        </a>
      </li>
      <li>
        <a href="/methods/control_flow.html">
          Flow of execution
        </a>
      </li>
      <li>
        <a href="/methods/scopes.html">
          Scopes
        </a>
      </li>
      <li>
        <a href="/methods/printing.html">
          Printing things
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/everything_an_object.html">
      Everything is an object
    </a>
    <ul>
      <li>
        <a href="/everything_an_object/object_classes.html">
          Objects have classes
        </a>
      </li>
      <li>
        <a href="/everything_an_object/object_methods.html">
          Calling methods
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/string_interpolation.html">
      String interpolation
    </a>
  </li>
  <li>
    <a href="/nothing_and_truth.html">
      Nothingness and the truth
    </a>
  </li>
  <li class="directory">
    <a href="/blocks.html">
      Blocks
    </a>
    <ul>
      <li>
        <a href="/blocks/block_syntax.html">
          Alternative block syntaxes
        </a>
      </li>
      <li>
        <a href="/blocks/block_arguments.html">
          Block arguments
        </a>
      </li>
      <li>
        <a href="/blocks/block_return_values.html">
          Block return values
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/bonus_1.html">
      Bonus: Methods &amp; Operators
    </a>
    <ul>
      <li>
        <a href="/bonus_1/operator_methods.html">
          Operators are methods
        </a>
      </li>
      <li>
        <a href="/bonus_1/predicate_methods.html">
          Predicate methods
        </a>
      </li>
      <li>
        <a href="/bonus_1/other_methods.html">
          Lots of other methods
        </a>
      </li>
      <li>
        <a href="/bonus_1/questions_commands.html">
          Questions and commands
        </a>
      </li>
      <li>
        <a href="/bonus_1/conditionals.html">
          Conditionals
        </a>
      </li>
      <li>
        <a href="/bonus_1/operators.html">
          Operators
        </a>
      </li>
      <li>
        <a href="/bonus_1/arithmetical_operators.html">
          Arithmetical operators
        </a>
      </li>
      <li>
        <a href="/bonus_1/logical_operators.html">
          Logical operators
        </a>
      </li>
      <li>
        <a href="/bonus_1/comparison_operators.html">
          Comparison operators
        </a>
      </li>
      <li>
        <a href="/bonus_1/alternative-syntax.html">
          Alternative Syntax
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/writing_classes.html">
      Writing classes
    </a>
    <ul>
      <li>
        <a href="/writing_classes/initializing_objects.html">
          Initializing objects
        </a>
      </li>
      <li>
        <a href="/writing_classes/instance_variables.html">
          Instance variables
        </a>
      </li>
      <li>
        <a href="/writing_classes/attribute_readers.html">
          Attribute readers
        </a>
      </li>
      <li>
        <a href="/writing_classes/attribute_writers.html">
          Attribute writers
        </a>
      </li>
      <li>
        <a href="/writing_classes/state_and_behaviour.html">
          State and behaviour
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/good_names.html">
      Using the right words
    </a>
  </li>
  <li class="directory expanded">
    <a href="/bonus_2.html">
      Bonus: Advanced Topics
    </a>
    <ul>
      <li>
        <a href="/bonus_2/libraries.html">
          Bonus: Using Libraries (1)
        </a>
      </li>
      <li>
        <a href="/bonus_2/modules.html">
          Bonus: Modules
        </a>
      </li>
      <li>
        <a href="/bonus_2/private_methods.html">
          Bonus: Private methods
        </a>
      </li>
      <li>
        <a href="/bonus_2/libraries_2.html">
          Bonus: Using Libraries (2)
        </a>
      </li>
      <li>
        <a href="/bonus_2/html.html">
          Bonus: HTML
        </a>
      </li>
      <li>
        <a href="/bonus_2/erb.html">
          Bonus: Embedded Ruby
        </a>
      </li>
      <li>
        <a href="/bonus_2/http.html">
          Bonus: HTTP
        </a>
      </li>
      <li>
        <a href="/bonus_2/rack.html">
          Bonus: Rack
        </a>
      </li>
      <li>
        <a href="/bonus_2/sinatra.html">
          Bonus: Sinatra
        </a>
      </li>
      <li class="active">
        <a href="/bonus_2/forms.html">
          Bonus: Forms
        </a>
      </li>
      <li>
        <a href="/bonus_2/storing_data.html">
          Bonus: Storing data
        </a>
      </li>
      <li>
        <a href="/bonus_2/sessions.html">
          Bonus: Sessions
        </a>
      </li>
      <li>
        <a href="/bonus_2/validations.html">
          Bonus: Validations
        </a>
      </li>
      <li>
        <a href="/bonus_2/resources.html">
          Bonus: Resources
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/exercises.html">
      Exercises
    </a>
    <ul>
      <li>
        <a href="/exercises/numbers.html">
          Working with Numbers
        </a>
      </li>
      <li>
        <a href="/exercises/strings.html">
          Working with Strings
        </a>
      </li>
      <li>
        <a href="/exercises/arrays_1.html">
          Working with Arrays (1)
        </a>
      </li>
      <li>
        <a href="/exercises/hashes_1.html">
          Working with Hashes (1)
        </a>
      </li>
      <li>
        <a href="/exercises/methods_1.html">
          Defining methods
        </a>
      </li>
      <li>
        <a href="/exercises/arrays_2.html">
          Working with Arrays (2)
        </a>
      </li>
      <li>
        <a href="/exercises/nested_arrays.html">
          Working with Nested Arrays
        </a>
      </li>
      <li>
        <a href="/exercises/hashes_2.html">
          Working with Hashes (2)
        </a>
      </li>
      <li>
        <a href="/exercises/truthiness.html">
          Truthiness
        </a>
      </li>
      <li>
        <a href="/exercises/email.html">
          The Email Class
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox.html">
          The Mailbox Class
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_text.html">
          The Mailbox Text Formatter
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_html.html">
          The Mailbox Html Formatter
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_file.html">
          Storing our HTML to a File
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_csv.html">
          Reading from a CSV File
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_erb.html">
          Generating HTML using ERB
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_sinatra.html">
          Serving HTML using Sinatra
        </a>
      </li>
      <li>
        <a href="/exercises/rubygems.html">
          Using Rubygems
        </a>
      </li>
      <li>
        <a href="/exercises/bundler.html">
          Using Bundler
        </a>
      </li>
    </ul>
  </li>
</ul>
      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>Bonus: Forms</h1>

<p>So far, all that our little application can do is return some HTML when asked.
I.e. it can respond to <code>GET</code> requests by returning HTML.</p>

<p>What if we want to talk back to our application, and send some data from the
browser to it? You have seen this a million times, there are those little forms
on websites that let you enter data and somehow submit it.</p>

<p>So, how does that work?</p>

<p>HTML defines a couple tags for describing forms that are part of a document
(web page).</p>

<p>Here&rsquo;s how a simple form looks like in HTML:</p>
<pre class="highlight html"><code><span class="nt">&lt;form&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>

<p>If you copy this HTML code to a file, and open the file in your browser it will
look similar to this:</p>

<p><img src="/assets/images/forms_1-770a2682.png"></p>

<p>Neat.</p>

<p>You can see that the two <code>&lt;input&gt;</code> tags are rendered (displayed) in different
ways because they have two different types: <code>text</code> and <code>submit</code>. In modern HTML
there are lots of other input element types. You can find a
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input">full list here</a>.</p>

<p>Let&rsquo;s make our little Sinatra application serve this form.</p>

<p>Replace the content of your <code>hello.erb</code> template in your <code>view</code> directory with
the HTML above. Then replace your <code>get &#39;/hello/:name&#39;</code> route with the following:</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s2">"/hello"</span> <span class="k">do</span>
  <span class="n">erb</span> <span class="ss">:hello</span>
<span class="k">end</span>
</code></pre>

<p>Restart the server and go to <a href="http://localhost:4567"><a href="http://localhost:4567">http://localhost:4567</a></a>.
You should see something like our screenshot above.</p>

<p>Now, this form isn&rsquo;t very useful, yet. If you submit it (enter something, and
click &ldquo;Submit&rdquo;) nothing much will happen. It clears the input element, and
appends a question mark to the URL for some reason, but that&rsquo;s it.</p>

<p>What&rsquo;s happening here?</p>

<p>When you click a button that is a &ldquo;submit&rdquo; input element then your browser will
submit the form that this button is part of. But where? If we do not specify
anything else the browser will submit it to the same URL that we are currently
looking at.</p>

<p>Also, what does &ldquo;submit&rdquo; mean, in this case? We said browsers speak HTTP when
they talk to a web server (our Sinatra application), so &ldquo;submit&rdquo; means making
another HTTP request. Again, if we do not specify anything else, the default
method will be <code>GET</code>.</p>

<p>So this basically just reloads the page, and displays the same form again,
served from our <code>get &quot;/hello&quot;</code> route. This is why the text in the input field
goes away.</p>

<p>Ok, where does the question mark come from though?</p>

<p>When the browser submits the form it collects all the data from the form input
elements, and sends it along with the HTTP request. In case of a <code>GET</code> request
it will append it to the URL, after a question mark, as name/value pairs.</p>

<p>However, our form input text element does not a name, and so the browser cannot
pass it in a meaningful way.</p>

<p>So let&rsquo;s change that, and specify a name for our text input. Since we want
the user to input their name, the name of our input should be <code>name</code>:</p>
<pre class="highlight html"><code>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;</span>
</code></pre>

<p>If you restart the application, reload the page, and again enter some text and
click submit &hellip; you should see that the URL changes to something like
<code>http://localhost:4567/hello?name=Monstas</code>. Aha!</p>

<p>So that&rsquo;s how the browser passes our input to the application. It just appends
it to the URL as name/value pairs (in case of a <code>GET</code> request): these pairs
after the question mark are called &ldquo;query parameters&rdquo; in HTTP.</p>

<p>Let&rsquo;s check that, and output the <code>params</code> in our route:</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s2">"/hello"</span> <span class="k">do</span>
  <span class="nb">p</span> <span class="n">params</span>
  <span class="n">erb</span> <span class="ss">:hello</span>
<span class="k">end</span>
</code></pre>

<p>Again, restart the application, and load the URL
<a href="http://localhost:4567/hello?name=Monstas"><a href="http://localhost:4567/hello?name=Monstas">http://localhost:4567/hello?name=Monstas</a></a>.
In your terminal you should then see something like:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="s2">"name"</span><span class="err">=&gt;</span><span class="s2">"Monstas"</span><span class="err">}</span><span class="w">
</span></code></pre>

<p>So this is how we can access the data that has been passed from the browser as
part of the HTTP request, when it submitted the form.</p>

<p>Let&rsquo;s do something with it. Change your route like so:</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s2">"/hello"</span> <span class="k">do</span>
  <span class="vi">@name</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span>
  <span class="n">erb</span> <span class="ss">:hello</span>
<span class="k">end</span>
</code></pre>

<p>And add this code at the top of your <code>hello.erb</code> view:</p>
<pre class="highlight html"><code><span class="err">&lt;</span>% if @name %&gt;
  <span class="nt">&lt;h1&gt;</span>Hello <span class="err">&lt;</span>%= @name %&gt;!<span class="nt">&lt;/h1&gt;</span>
<span class="err">&lt;</span>% end %&gt;
</code></pre>

<p>When you restart the server, and reload the page you should see something like
this:</p>

<p><img src="/assets/images/forms_2-5134e116.png"></p>

<p>Awesome!</p>

<p>So this is how you can pass (submit) data from the brower to your application,
and use it in some way.</p>

<p>Let&rsquo;s make one more improvement to our form. It currently always whipes out the
text that has been submitted. Let&rsquo;s make sure we preseve it in the input element.</p>

<p>We can do that by specifying the <code>value</code> attribute on the <code>input</code> tag, like so:</p>
<pre class="highlight html"><code><span class="nt">&lt;form&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"&lt;%= @name %&gt;"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>

<p>When you restart your application, and reload the page, it should now put the
name to the input element:</p>

<p><img src="/assets/images/forms_3-11a66dfa.png"></p>

        <nav class="page-nav"><a class="prev" href="/bonus_2/sinatra.html">
  Previous
</a></nav>
        <nav class="page-nav"><a class="next" href="/bonus_2/storing_data.html">
  Next
</a></nav>
      </article>
    </div>

    <footer>
      <ul>
        <li><a href="http://rubymonstas.org">Ruby Monstas</a></li>
        <li><a href="mailto:ruby.monsters@gmail.com">Email</a></li>
        <li><a href="https://twitter.com/rubymonsters">Twitter</a></li>
        <li><a href="https://github.com/rubymonsters">GitHub</a></li>
        <li><a href="https://creativecommons.org/licenses/by-sa/2.0/" rel="license cc:license">License</a></li>
        <li><a href="http://foundation.travis-ci.org/imprint/">Imprint</a></li>
      </ul>
    </footer>

    <script src="../assets/javascripts/modernizr-4c875d94.js" type="text/javascript"></script>
    <script src="../assets/javascripts/monstas-e84d6217.js" type="text/javascript"></script>
  </body>
</html>
