<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="uKYFmuza2622_FfyhqNhsCIUDJrOokVPBkVUTtPDjFc" />

    <title>The Mailbox Html Formatter | Ruby for Beginners</title>

    <link href="../assets/stylesheets/monstas-c1543d85.css" rel="stylesheet" type="text/css" />
    <script src="../assets/javascripts/modernizr-4c875d94.js" type="text/javascript"></script>
    <script src="../assets/javascripts/monstas-6918bd1b.js" type="text/javascript"></script>
  </head>

  <body>
    <nav class="page-nav"><a class="previous" href="11-mailbox_text.html">Previous</a></nav>
    <nav class="page-nav"><a class="next" href="13-mailbox_file.html">Next</a></nav>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
          <li class='child '><a href="../">Ruby For Beginners</a></li><li class='child '><a href="../01-preface.html">Preface</a></li><li class='child '><a href="../02-creation.html">Programming is creation</a></li><li class='child '><a href="../03-learning_to_program.html">Learning to program</a></li><li class='child '><a href="../04-learning_modes.html">Learning modes</a></li><li class='child '><a href="../05-dont_believe.html">Don&rsquo;t believe everything we say</a></li><li class='child '><a href="../06-formatting_code.html">Formatting your code</a></li><li class='child '><a href="../07-error_messages.html">Reading error messages</a></li><li class='child '><a href="../08-using_google.html">Using Google</a></li><li class='child '><a href="../09-your_tools.html">Your tools</a></li><li class='child '><a href="../10-object_oriented_programming.html">Object oriented programming</a></li><li class='child '><a href="../11-built_in_classes.html">Built-in classes</a></li><li class='child '><a href="../12-numbers.html">Numbers</a></li><li class='child '><a href="../13-strings.html">Strings</a></li><li class='child '><a href="../14-symbols.html">Symbols</a></li><li class='child '><a href="../15-arrays.html">Arrays</a></li><li class='child '><a href="../16-hashes.html">Hashes</a></li><li class='child '><a href="../17-variables.html">Variables</a></li><li class='child '><a href="../18-methods.html">Methods</a></li><li class='child '><a href="../19-return_values.html">Return values</a></li><li class='child '><a href="../20-parentheses.html">Parentheses</a></li><li class='child '><a href="../21-writing_methods.html">Writing a new method</a></li><li class='child '><a href="../22-control_flow.html">Flow of execution</a></li><li class='child '><a href="../23-scopes.html">Scopes</a></li><li class='child '><a href="../24-printing.html">Printing things</a></li><li class='child '><a href="../25-everything_an_object.html">Everything is an object</a></li><li class='child '><a href="../26-object_classes.html">Objects have classes</a></li><li class='child '><a href="../27-object_methods.html">Calling methods</a></li><li class='child '><a href="../28-operator_methods.html">Operators are methods</a></li><li class='child '><a href="../29-predicate_methods.html">Predicate methods</a></li><li class='child '><a href="../30-other_methods.html">Lots of other methods</a></li><li class='child '><a href="../31-questions_commands.html">Questions and commands</a></li><li class='child '><a href="../32-conditionals.html">Conditionals</a></li><li class='child '><a href="../33-operators.html">Operators</a></li><li class='child '><a href="../34-arithmetical_operators.html">Arithmetical operators</a></li><li class='child '><a href="../35-logical_operators.html">Logical operators</a></li><li class='child '><a href="../36-comparison_operators.html">Comparison operators</a></li><li class='child '><a href="../37-string_interpolation.html">String interpolation</a></li><li class='child '><a href="../38-nothing_and_truth.html">Nothingness and the truth</a></li><li class='child '><a href="../39-blocks.html">Blocks</a></li><li class='child '><a href="../40-block_syntax.html">Alternative block syntaxes</a></li><li class='child '><a href="../41-block_arguments.html">Block arguments</a></li><li class='child '><a href="../42-block_return_values.html">Block return values</a></li><li class='child '><a href="../43-writing_classes.html">Writing classes</a></li><li class='child '><a href="../44-initializing_objects.html">Initializing objects</a></li><li class='child '><a href="../45-instance_variables.html">Instance variables</a></li><li class='child '><a href="../46-attribute_readers.html">Attribute readers</a></li><li class='child '><a href="../47-attribute_writers.html">Attribute writers</a></li><li class='child '><a href="../48-state_and_behaviour.html">State and behaviour</a></li><li class='child '><a href="../49-libraries.html">Bonus: Using Libraries</a></li><li class='child '><a href="../50-modules.html">Bonus: Modules</a></li><li class='child '><a href="../51-private_methods.html">Bonus: Private methods</a></li><li class='child '><a href="../52-good_names.html">Using the right words</a></li><li class='parent'><span class='parent-label'>Exercises</span><ul><li class='child '><a href="01-numbers.html">Working with numbers</a></li><li class='child '><a href="02-strings.html">Working with strings</a></li><li class='child '><a href="03-arrays_1.html">Working with arrays (1)</a></li><li class='child '><a href="04-arrays_2.html">Working with arrays (2)</a></li><li class='child '><a href="05-nested_arrays.html">Working with nested arrays</a></li><li class='child '><a href="06-hashes_1.html">Working with hashes (1)</a></li><li class='child '><a href="07-hashes_2.html">Working with hashes (2)</a></li><li class='child '><a href="08-truthiness.html">Truthiness</a></li><li class='child '><a href="09-email.html">The Email class</a></li><li class='child '><a href="10-mailbox.html">The Mailbox class</a></li><li class='child '><a href="11-mailbox_text.html">The Mailbox Text Formatter</a></li><li class='child active'><a href="12-mailbox_html.html">The Mailbox Html Formatter</a></li><li class='child '><a href="13-mailbox_file.html">Storing our HTML to a file</a></li><li class='child '><a href="14-mailbox_csv.html">Reading from a CSV file</a></li><li class='child '><a href="15-mailbox_erb.html">Generating HTML using ERB</a></li><li class='child '><a href="16-ex_mailbox_sinatra.html">Serving HTML using Sinatra</a></li><li class='child '><a href="16-mailbox_sinatra.html">Serving HTML using Sinatra</a></li></ul></li>
        </ul>
      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>The Mailbox Html Formatter</h1>

<p>One question that may have come up while working on the mailbox text formatter
exercise is: Why would we have a separate class for formatting the ASCII table,
that is, a plain text table that uses characters like <code>+</code>, <code>-</code>, and <code>|</code>.</p>

<p>The reason is: We want each one of our classes to encapsulate one concept that
is useful in our application. We also say: each one of our classes should be
<em>concerned</em> with one responsibility. An email vaguely resembles the concept of
an analog letter, written on paper: some message is being sent from one person
to another. Nowadays everyone knows what an email is: it stores all information
about this particular message. The same is true for mailboxes, which are being
used to store a bunch of emails. Formatting a number of emails in order to be
displayed on a text based terminal is a very different concept, and concern.</p>

<p>Therefor it makes a lot of sense to have three different classes implement each
one of these concepts, or concerns.</p>

<p>Aside from being comprehensible, and mapping to concepts that we already know,
one other advantage is: We can now easily implement other formatter classes
that format our emails in a different way, suitable to be displayed on other
mediums.</p>

<p>That&rsquo;s what this exercise is about: We want to display our mailbox contents
in HTML, the format that browsers like to use. This will be our first step
towards learning how to build a web application.</p>

<p>Before we get to that, we&rsquo;d like to point out one other aspect, that you&rsquo;ll
remember when we get to talk about the architecture that Rails use to structure
and separate concerns, called &ldquo;model, view, controller&rdquo;.</p>

<ul>
<li>The two classes <code>Email</code> and <code>Mailbox</code> in your application are models: they
are concerned with modelling those &ldquo;real-world&rdquo; things that your users are
concerned with. They want to work with emails.</li>
<li>The class <code>MailboxTextFormatter</code> on the other hand is a view: It is used in
order to generate a certain representation, in a format that is suitable to a
certain medium (the terminal, in our case).</li>
<li>You don&rsquo;t have a controller class so far, but the little bit of code at the
end of the file does what a controller usually would do: it generates some
models (the emails, and the mailbox objects) and passes them to the view (the
formatter) in order to be rendered into something that can then be returned
and displayed.</li>
</ul>

<p>Ok, now to our exercise. We will basically start over with the same code again,
except that our formatter class now will be called <code>MailboxHtmlFormatter</code>:</p>
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Email</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
    <span class="vi">@subject</span> <span class="o">=</span> <span class="n">subject</span>
    <span class="vi">@headers</span> <span class="o">=</span> <span class="n">headers</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Mailbox</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">emails</span><span class="p">)</span>
    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
    <span class="vi">@emails</span> <span class="o">=</span> <span class="n">emails</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">MailboxTextFormatter</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">mailbox</span><span class="p">)</span>
    <span class="vi">@mailbox</span> <span class="o">=</span> <span class="n">mailbox</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">emails</span> <span class="o">=</span> <span class="p">[</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Homework this week"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Ferdous"</span> <span class="p">}),</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Keep on coding! :)"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Dajana"</span> <span class="p">}),</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Re: Homework this week"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-02"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Ariane"</span> <span class="p">})</span>
<span class="p">]</span>
<span class="n">mailbox</span> <span class="o">=</span> <span class="no">Mailbox</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Ruby Study Group"</span><span class="p">,</span> <span class="n">emails</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="no">MailboxHtmlFormatter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">mailbox</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">formatter</span><span class="p">.</span><span class="nf">format</span>
</code></pre>

<p>Your goal is to complete the code in a way so it outputs the following:</p>
<pre class="highlight html"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;style&gt;</span>
      <span class="nt">table</span> <span class="p">{</span>
        <span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">td</span><span class="o">,</span> <span class="nt">th</span> <span class="p">{</span>
        <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Ruby Study Group<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;table&gt;</span>
      <span class="nt">&lt;thead&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;th&gt;</span>Date<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th&gt;</span>From<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th&gt;</span>Subject<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/thead&gt;</span>
      <span class="nt">&lt;tbody&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-01<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Ferdous<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Homework this week<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-01<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Dajana<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Keep on coding! :)<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-02<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Ariane<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Re: Homework this week<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<p>Does that look scary? A little bit, maybe. At the very least it&rsquo;s probably fair
to say that manually writing HTML isn&rsquo;t very popular amonst most programmers.
Therefor there are quite a few tools that make our lives easier. And your task
is to write such a tool.</p>

<p>Also, this exercise should actually be easier for you to complete. You already
have a bunch of practice in iterating over emails, and working with arrays and
strings. And this time, you don&rsquo;t need to deal with the maximum length of
strings per column. You can just interpolate things together.</p>

        <nav class="page-nav"><a class="previous" href="11-mailbox_text.html">Previous</a></nav>
        <nav class="page-nav"><a class="next" href="13-mailbox_file.html">Next</a></nav>
      </article>
    </div>
  </body>
</html>
