<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="BEd2YAbpSQrRqU2-5wUifTTzvqTMGLLE269b0JZTfCs" />

    <title>Flow of execution | Ruby for Beginners</title>

    <link href="assets/stylesheets/monstas-c1543d85.css" rel="stylesheet" type="text/css" />
    <script src="assets/javascripts/modernizr-4c875d94.js" type="text/javascript"></script>
    <script src="assets/javascripts/monstas-54b93db5.js" type="text/javascript"></script>
  </head>

  <body>
    <nav class="page-nav"><a class="previous" href="21-writing_methods.html">Previous</a></nav>
    <nav class="page-nav"><a class="next" href="23-scopes.html">Next</a></nav>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
          <li class='child '><a href="./">Ruby For Beginners</a></li><li class='child '><a href="01-preface.html">Preface</a></li><li class='child '><a href="02-creation.html">Programming is creation</a></li><li class='child '><a href="03-learning_to_program.html">Learning to program</a></li><li class='child '><a href="04-learning_modes.html">Learning modes</a></li><li class='child '><a href="05-dont_believe.html">Don&rsquo;t believe everything we say</a></li><li class='child '><a href="06-formatting_code.html">Formatting your code</a></li><li class='child '><a href="07-error_messages.html">Reading error messages</a></li><li class='child '><a href="08-using_google.html">Using Google</a></li><li class='child '><a href="09-your_tools.html">Your tools</a></li><li class='child '><a href="10-object_oriented_programming.html">Object oriented programming</a></li><li class='child '><a href="11-built_in_classes.html">Built-in classes</a></li><li class='child '><a href="12-numbers.html">Numbers</a></li><li class='child '><a href="13-strings.html">Strings</a></li><li class='child '><a href="14-symbols.html">Symbols</a></li><li class='child '><a href="15-arrays.html">Arrays</a></li><li class='child '><a href="16-hashes.html">Hashes</a></li><li class='child '><a href="17-variables.html">Variables</a></li><li class='child '><a href="18-methods.html">Methods</a></li><li class='child '><a href="19-return_values.html">Return values</a></li><li class='child '><a href="20-parentheses.html">Parentheses</a></li><li class='child '><a href="21-writing_methods.html">Writing a new method</a></li><li class='child active'><a href="22-control_flow.html">Flow of execution</a></li><li class='child '><a href="23-scopes.html">Scopes</a></li><li class='child '><a href="24-printing.html">Printing things</a></li><li class='child '><a href="25-everything_an_object.html">Everything is an object</a></li><li class='child '><a href="26-object_classes.html">Objects have classes</a></li><li class='child '><a href="27-object_methods.html">Calling methods</a></li><li class='child '><a href="28-operator_methods.html">Operators are methods</a></li><li class='child '><a href="29-predicate_methods.html">Predicate methods</a></li><li class='child '><a href="30-other_methods.html">Lots of other methods</a></li><li class='child '><a href="31-questions_commands.html">Questions and commands</a></li><li class='child '><a href="32-conditionals.html">Conditionals</a></li><li class='child '><a href="33-operators.html">Operators</a></li><li class='child '><a href="34-arithmetical_operators.html">Arithmetical operators</a></li><li class='child '><a href="35-logical_operators.html">Logical operators</a></li><li class='child '><a href="36-comparison_operators.html">Comparison operators</a></li><li class='child '><a href="37-string_interpolation.html">String interpolation</a></li><li class='child '><a href="38-nothing_and_truth.html">Nothingness and the truth</a></li><li class='child '><a href="39-blocks.html">Blocks</a></li><li class='child '><a href="40-block_syntax.html">Alternative block syntaxes</a></li><li class='child '><a href="41-block_arguments.html">Block arguments</a></li><li class='child '><a href="42-block_return_values.html">Block return values</a></li><li class='child '><a href="43-writing_classes.html">Writing classes</a></li><li class='child '><a href="44-initializing_objects.html">Initializing objects</a></li><li class='child '><a href="45-instance_variables.html">Instance variables</a></li><li class='child '><a href="46-attribute_readers.html">Attribute readers</a></li><li class='child '><a href="47-attribute_writers.html">Attribute writers</a></li><li class='child '><a href="48-state_and_behaviour.html">State and behaviour</a></li><li class='child '><a href="49-libraries.html">Bonus: Using Libraries</a></li><li class='child '><a href="50-modules.html">Bonus: Modules</a></li><li class='child '><a href="51-private_methods.html">Bonus: Private methods</a></li><li class='child '><a href="52-good_names.html">Using the right words</a></li><li class='parent'><span class='parent-label'>Exercises</span><ul><li class='child '><a href="exercises/01-numbers.html">Working with numbers</a></li><li class='child '><a href="exercises/02-strings.html">Working with strings</a></li><li class='child '><a href="exercises/03-arrays_1.html">Working with arrays (1)</a></li><li class='child '><a href="exercises/04-arrays_2.html">Working with arrays (2)</a></li><li class='child '><a href="exercises/05-nested_arrays.html">Working with nested arrays</a></li><li class='child '><a href="exercises/06-hashes_1.html">Working with hashes (1)</a></li><li class='child '><a href="exercises/07-hashes_2.html">Working with hashes (2)</a></li><li class='child '><a href="exercises/08-truthiness.html">Truthiness</a></li><li class='child '><a href="exercises/09-email.html">The Email class</a></li><li class='child '><a href="exercises/10-mailbox.html">The Mailbox class</a></li><li class='child '><a href="exercises/11-mailbox_text.html">The Mailbox Text Formatter</a></li><li class='child '><a href="exercises/12-mailbox_html.html">The Mailbox Html Formatter</a></li><li class='child '><a href="exercises/13-mailbox_file.html">Storing our HTML to a file</a></li><li class='child '><a href="exercises/14-mailbox_csv.html">Reading from a CSV file</a></li><li class='child '><a href="exercises/15-mailbox_erb.html">Generating HTML using ERB</a></li><li class='child '><a href="exercises/16-ex_mailbox_sinatra.html">Serving HTML using Sinatra</a></li><li class='child '><a href="exercises/16-mailbox_sinatra.html">Serving HTML using Sinatra</a></li></ul></li>
        </ul>
      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>Flow of execution</h1>

<p>One of the things we, as programmers, have assimilated so much that we forget
to explain to beginners is how, and in what exact order, Ruby goes through your
program. This is called the &ldquo;flow of execution&rdquo;, or &ldquo;control flow&rdquo;.</p>

<p>When you execute a Ruby file with the <code>ruby</code> runtime then it will read your
Ruby code, and start executing it line by line, from top to bottom.</p>

<p>Let&rsquo;s look at our example from above, and how the Ruby control flow goes
through it under the microscope.</p>

<p>For convenience we&rsquo;ve now added line numbers, like your editor does. We have
also added parentheses for the method call to <code>puts</code>, to make this more
obvious, even though in praxis we recommend against this:</p>
<pre class="highlight ruby"><code><span class="mi">1</span> <span class="o">|</span> <span class="k">def</span> <span class="nf">add_two</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="mi">2</span> <span class="o">|</span>   <span class="n">number</span> <span class="o">+</span> <span class="mi">2</span>
<span class="mi">3</span> <span class="o">|</span> <span class="k">end</span>
<span class="mi">4</span> <span class="o">|</span>
<span class="mi">5</span> <span class="o">|</span> <span class="nb">puts</span><span class="p">(</span><span class="n">add_two</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</code></pre>

<p>Ruby starts on line 1, and finds our method definition, starting with the
keyword <code>def</code>, so it will read all of it, until it finds the keyword <code>end</code> on
line 3. For now it does nothing but define this method, and keep it in memory
so it can be used from now on.</p>

<p>Now, on line 5, Ruby finds that we are using the word <code>puts</code>, and it sees that
we are trying to pass something to it, so this must be a method call.</p>

<p>In order to call a method Ruby needs to first evaluate the values that we want
to pass. So Ruby now looks at what&rsquo;s between the parentheses, and finds another
method call <code>add_two(3)</code>.</p>

<p>Again, in order to actually call the method <code>add_two</code> Ruby needs to first
evaluate the values that we want to pass.</p>

<p>In this case this is the number <code>3</code>, so Ruby will create this object (an
instance of the class <code>Fixnum</code>). Now it is finally ready to actually call the
method <code>add_two</code>, passing the number just created.</p>

<p>Now, for the first time, Ruby starts to deviate from the default flow of
execution, which simply goes from top to bottom. Instead, since we are calling
a method, Ruby now enters the method body that we have defined for the method
<code>add_two</code> before: the control flow now jumps to line 2.</p>

<p>In this moment, since we are entering a method that has an argument, Ruby
also defines a local variable <code>number</code>, and assigns the object that was
passed, the number <code>3</code>, to this variable.</p>

<p>Now Ruby is ready to evaluate line 2. It finds that we are using the operator
<code>+</code>, on the value that is assigned to the variable <code>number</code>, which is <code>3</code>. In
order to do that Ruby first evaluates the thing that is on the right hand side
of the operator, which in our example, again, is a number. Ruby will therefor
create the number (an instance of the class <code>Fixnum</code>), this time with the value
<code>2</code>.</p>

<p>Ruby is now ready to evaluate the operator, and add the number <code>2</code> to the
number <code>3</code>. This operation returns a new number (an instance of the class
<code>Fixnum</code>), which is <code>5</code>.</p>

<p>Ruby recognizes that the method body has ended, and so it returns from the
method <code>add_two</code>, with the return value <code>5</code>, because this was <em>the return value
of the statement that was evaluated last</em>.</p>

<p>This is now the second time that Ruby makes a jump: the control flow jumps
back to line 5. Ruby is now done evaluating the method call <code>add_two(3)</code>, and
this method call has returned the object <code>5</code>. Ruby can now finally call the
method <code>puts</code> passing the object <code>5</code>, which it will then print out.</p>

        <nav class="page-nav"><a class="previous" href="21-writing_methods.html">Previous</a></nav>
        <nav class="page-nav"><a class="next" href="23-scopes.html">Next</a></nav>
      </article>
    </div>
  </body>
</html>
